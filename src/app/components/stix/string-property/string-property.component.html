<div class="string-property grow-to-row">
  <!-- view -->
  @if (!config.mode || config.mode === 'view') {
    <div class="labelled-box grow-to-row">
      <div class="content">
        {{ config.object[config.field] }}
      </div>
      <span class="labelled-box-label">{{
        config.label ? config.label : config.field
      }}</span>
    </div>
  }
  <!-- edit -->
  @else if (config.mode === 'edit') {
    <div class="string-property-edit grow-to-row">
      <!-- editType: 'select' -->
      @if (config.editType === 'select') {
        <mat-form-field appearance="outline">
          @if (loading) {
            <mat-label class="loading">
              <span
                >Loading
                {{ config.label ? config.label : config.field }}...</span
              >
              <mat-spinner diameter="20"></mat-spinner>
            </mat-label>
          } @else {
            <mat-label>{{
              config.label ? config.label : config.field
            }}</mat-label>
          }
          <mat-select
            [formControl]="selectControl"
            [required]="config.required ? config.required : false">
            @for (item of options; track item) {
              <mat-option [value]="item">{{ item }}</mat-option>
            }
          </mat-select>
        </mat-form-field>
      }
      <!-- editType: 'any' -->
      @else {
        <mat-form-field appearance="outline">
          <mat-label>{{
            config.label ? config.label : config.field
          }}</mat-label>
          <input
            matInput
            [required]="config.required ? config.required : false"
            [(ngModel)]="config.object[config.field]" />
        </mat-form-field>
      }
    </div>
  }
  <!-- diff -->
  @else {
    <div class="labelled-box grow-to-row">
      <div class="content">
        <app-property-diff
          [before]="previous"
          [after]="current"></app-property-diff>
      </div>
      <span class="labelled-box-label">{{
        config.label ? config.label : config.field
      }}</span>
    </div>
  }
</div>
