<div class="object-toolbar">
    <mat-toolbar>
        <breadcrumb></breadcrumb>
        <div class="spacer"></div>
        <div class="controls button-list section" *ngIf="editable || editing">
            <button mat-button class="control" matTooltip="validate & save" [disabled]="!editing" (click)="saveEdits()"><mat-icon aria-label="save">save</mat-icon></button>
            <button *ngIf="!editing" mat-button class="control" matTooltip="edit" (click)="startEditing()"><mat-icon aria-label="edit">edit</mat-icon></button>
            <button *ngIf="editing" mat-button class="control" matTooltip="discard changes & stop editing" (click)="stopEditing()"><mat-icon aria-label="discard">edit_off</mat-icon></button>
            <div *ngIf="deletable" class="button-tooltip" [matTooltip]="editing ? (hasRelationships ? 'an object with relationships cannot be deleted' : 'delete') : ''">
                <button mat-button class="control" [disabled]="!editing || hasRelationships" (click)="delete()"><mat-icon aria-label="delete">delete</mat-icon></button>
            </div>
            <app-object-status *ngIf="hasWorkflow"></app-object-status>
            <span *ngIf="hasWorkflow" [matTooltip]="!websiteIntegrationService.websiteIntegrationEnabled ? 'external website integration disabled' : (!websiteIntegrationService.currentWebIntegrationStatus.valid ? 'could not find object on att&ck website' : 'view object in att&ck website')">
              <button mat-button 
                [disabled]="!websiteIntegrationService.checkExternalUrlValidity(editorService.stixId)" 
                class="control"
                (click)="openExternalUrl()">
                  <mat-icon>
                    open_in_new
                  </mat-icon>
              </button>
            </span>
            
        </div>
        <div class="controls button-list section">
            <!-- <button mat-button class="control" matTooltip="back to top" [disabled]="!canScroll" (click)="emitScrollTop()"><mat-icon aria-label="back to top">vertical_align_top</mat-icon></button> -->
            <button mat-button class="control" matTooltip="toggle theme" (click)="emitToggleTheme()"><mat-icon aria-label="help">invert_colors</mat-icon></button>
            <button mat-button class="control" matTooltip="toggle resources drawer" [disabled]="!isLoggedIn || !sidebarEnabled" (click)="toggleSidebar()"><mat-icon aria-label="sidebar">view_sidebar</mat-icon></button>
            <!-- <button mat-button class="control" matTooltip="view on website"><mat-icon aria-label="view on website">open_in_new</mat-icon></button> -->
            <!-- TODO fill icon when bookmarked -->
            <!-- <button mat-button class="control" matTooltip="bookmark" ><mat-icon aria-label="bookmark">bookmark_border</mat-icon></button> -->
        </div>
    </mat-toolbar>
</div>
